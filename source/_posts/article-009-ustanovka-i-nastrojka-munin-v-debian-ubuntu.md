layout: post
title: Установка и настройка Munin в Debian / Ubuntu
date: 2009-05-22
tags:
- debian
- ubuntu
- debian-lenny
- munin
- мониторинг
categories: articles
permalink: ustanovka-i-nastrojka-munin-v-debian-ubuntu

---

**Munin** - удобное и простое в настройке **средство мониторинга производительности** серверов. Сразу после установки доступно большое число плагинов, позволяющих следить практически за любыми параметрами сервера: load average, сеть, загрузка CPU,  использование памяти, postfix, exim4, mysql и т.д. Написание самих плагинов не составляет никакого труда для людей, знакомых с программированием. Всю отчетную информацию **Munin** представляет в виде графиков через web-интерфейс.

<!-- more -->

Архитектура Munin
=================

**Munin** реализовано на языке программирования Perl и использует замечательное приложение RRDTool (набор утилит для хранения и обработки динамических (изменяющихся во времени) последовательностей данных). **Munin** реализован в виде master/node архитектуры, в которой master соединяется со всеми nodes через определенных интервал времени и опрашивает о состоянии тех или иных параметров. Полученные данные сохраняются в RRD файлах и при необходимости обновляются графики мониторинга. Как уже кпоминалось, **Munin** может быть легко расширяем за счет плагинов.

Установка Munin
===============

Установка Munin обычна для Debian-based систем:

``` bash
    # установка munin сервера
    $ sudo aptitude install munin
    # установка munin клиента
    $ sudo aptitude install munin-node
```
Настройка Munin
===============

Настройка Munin состоит из 2ух частей:

 - настройка сервера - отвечает за создание гафиков мониторинга
 - настройка клиента - отвечает за передачу параметров мониторинга серверу

Все необходимые для настройка файлы располагаются в директории **/etc/munin**.

Настройка Munin сервера
-----------------------

Открываем файл конфигурации:

``` bash
    $ sudo vim /etc/munin/munin.conf
```
Выглядеть он должен приблизительно следующим образом:

``` bash
    # ...
    # Расположение RDP базы данных
    dbdir /var/lib/munin
    # Расположение HTML файлов и изображений графиков мониторинга
    htmldir /var/www/munin
    # Логи
    logdir /var/log/munin
    # Информация о запусках
    rundir /var/run/munin

    # HTML шаблоны
    tmpldir /etc/munin/templates

    # Make graphs show values per minute instead of per second
    #graph_period minute
    # ...
    # a simple host tree
    [localhost.localdomain]
    address 127.0.0.1
    use_node_name yes
```

Здесь практически никаких изменений не потребуется. Единственное, что можно сделать - это изменить имя хоста, которое будет выводиться на графиках вместо **localhost.localdomain**. Например, так:

``` bash
    # DebianWorld.Ru host
    [DebianWorld.Ru]
    address 127.0.0.1
    use_node_name yes
```
Чтобы принудительно заставить сервер опросить клиентов и перестроить графики мониторинга, необходимо выполнить следующую команду:

``` bash
    $ sudo /usr/share/munin/munin-update –force-root
```

Продолжение [тут](/articles/ustanovka-i-nastrojka-munin-v-debian-ubuntu-2)
